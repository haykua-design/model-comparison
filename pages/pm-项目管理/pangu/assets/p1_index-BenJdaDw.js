import{j as e,n as N,o as v,O as w,C as F,p as y,X as A,T as D,q as B,F as C,s as j,v as E,r as T,w as I,P as u,E as P,x as z,y as R,c as S,G as M}from"./vendor-DOnBpIxk.js";import{u as b,B as p,A as h}from"./Avatar-DJkdJ9br.js";import{c as f}from"./index-CgCDIFFl.js";function O({task:t,isOpen:i,onClose:c}){const{users:o,updateTask:l}=b();if(!t)return null;o.find(s=>s.id===t.assigneeId);const d=["High","Medium","Low"],x=["Todo","In Progress","Done"];return e.jsx(N,{open:i,onOpenChange:s=>!s&&c(),children:e.jsxs(v,{children:[e.jsx(w,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 animate-in fade-in duration-200"}),e.jsxs(F,{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl bg-[#1C1F26] border border-[#2D313A] rounded-lg shadow-2xl z-50 overflow-hidden animate-in zoom-in-95 duration-200 focus:outline-none",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2D313A]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-mono text-[#6B7280]",children:t.id}),e.jsx("div",{className:"w-px h-3 bg-[#2D313A]"}),e.jsx(p,{variant:t.status==="Done"?"success":t.status==="In Progress"?"warning":"default",children:t.status})]}),e.jsx(y,{className:"p-1 text-[#6B7280] hover:text-[#F3F4F6] transition-colors",children:e.jsx(A,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row min-h-[400px]",children:[e.jsxs("div",{className:"flex-1 p-6 space-y-6",children:[e.jsx("div",{children:e.jsx("input",{defaultValue:t.title,onBlur:s=>l(t.id,{title:s.target.value}),className:"w-full bg-transparent text-xl font-bold text-[#F3F4F6] placeholder-[#6B7280] focus:outline-none"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#9CA3AF]",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"描述"})]}),e.jsx("textarea",{defaultValue:t.description,onBlur:s=>l(t.id,{description:s.target.value}),placeholder:"添加更详细的描述...",className:"w-full bg-[#0F1117]/50 border border-[#2D313A] rounded-md p-3 text-sm text-[#F3F4F6] placeholder-[#6B7280] min-h-[150px] focus:outline-none focus:border-[#5E6AD2]/50 transition-all resize-none"})]})]}),e.jsx("div",{className:"w-full md:w-64 bg-[#0F1117]/30 border-l border-[#2D313A] p-6 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"text-[10px] uppercase text-[#6B7280] font-bold tracking-wider flex items-center gap-1.5",children:[e.jsx(B,{className:"w-3 h-3"})," 负责人"]}),e.jsx("select",{value:t.assigneeId,onChange:s=>l(t.id,{assigneeId:s.target.value}),className:"w-full bg-[#1C1F26] border border-[#2D313A] rounded-md px-2 py-1.5 text-sm text-[#F3F4F6] focus:outline-none focus:border-[#5E6AD2] transition-all",children:o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"text-[10px] uppercase text-[#6B7280] font-bold tracking-wider flex items-center gap-1.5",children:[e.jsx(C,{className:"w-3 h-3"})," 优先级"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(s=>e.jsx("button",{onClick:()=>l(t.id,{priority:s}),className:f("px-2 py-1 rounded text-[11px] font-medium border transition-all",t.priority===s?"bg-[#5E6AD2]/10 border-[#5E6AD2] text-[#5E6AD2]":"bg-transparent border-[#2D313A] text-[#6B7280] hover:border-[#6B7280]"),children:s},s))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"text-[10px] uppercase text-[#6B7280] font-bold tracking-wider flex items-center gap-1.5",children:[e.jsx(j,{className:"w-3 h-3"})," 截止日期"]}),e.jsx("input",{type:"date",value:t.dueDate,onChange:s=>l(t.id,{dueDate:s.target.value}),className:"w-full bg-[#1C1F26] border border-[#2D313A] rounded-md px-2 py-1.5 text-sm text-[#F3F4F6] focus:outline-none focus:border-[#5E6AD2] transition-all [color-scheme:dark]"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"text-[10px] uppercase text-[#6B7280] font-bold tracking-wider flex items-center gap-1.5",children:[e.jsx(E,{className:"w-3 h-3"})," 状态"]}),e.jsx("div",{className:"grid grid-cols-1 gap-1",children:x.map(s=>e.jsx("button",{onClick:()=>l(t.id,{status:s}),className:f("px-3 py-1.5 rounded-md text-xs text-left transition-all",t.status===s?"bg-[#5E6AD2] text-white":"bg-white/5 text-[#9CA3AF] hover:bg-white/10"),children:s},s))})]})]})})]})]})]})})}function L(){const{tasks:t,users:i,setTasks:c,moveTask:o}=b(),[l,d]=T.useState(null),x=[{title:"Todo",color:"#6B7280"},{title:"In Progress",color:"#F59E0B"},{title:"Done",color:"#22C55E"}],s=r=>{switch(r){case"High":return"danger";case"Medium":return"warning";case"Low":return"info";default:return"default"}};return e.jsxs("div",{className:"h-full flex flex-col p-6 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#F3F4F6]",children:"研发看板"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#6B7280] mt-1",children:[e.jsx("span",{children:"DDLive 核心团队"}),e.jsx(I,{className:"w-3 h-3"}),e.jsx("span",{children:"Sprint Q1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2 mr-4",children:[i.slice(0,5).map(r=>e.jsx(h,{src:r.avatarUrl,fallback:r.name,size:"xs",className:"ring-2 ring-[#0F1117]"},r.id)),e.jsx("div",{className:"w-5 h-5 rounded-full bg-[#2D313A] border-2 border-[#0F1117] flex items-center justify-center text-[8px] text-[#9CA3AF]",children:"+10"})]}),e.jsxs("button",{className:"bg-[#5E6AD2] hover:bg-[#4E5AC0] text-white px-3 py-1.5 rounded-md text-xs font-medium transition-all flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"})," 新建任务"]})]})]}),e.jsx("div",{className:"flex-1 flex gap-6 overflow-x-auto pb-4 custom-scrollbar",children:x.map(r=>{const m=t.filter(a=>a.status===r.title);return e.jsxs("div",{className:"w-80 flex-shrink-0 flex flex-col group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-[#F3F4F6] text-sm font-semibold",children:r.title==="Todo"?"待办":r.title==="In Progress"?"进行中":"已完成"}),e.jsx(p,{variant:"default",className:"bg-white/5 text-[#6B7280] border-none px-1.5",children:m.length})]}),e.jsx("button",{className:"p-1 text-[#6B7280] hover:text-[#F3F4F6] opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(P,{className:"w-4 h-4"})})]}),e.jsxs(z,{axis:"y",values:m,onReorder:a=>{const n=t.filter(g=>g.status!==r.title);c([...n,...a])},className:"flex-1 space-y-3",children:[m.map(a=>e.jsx(R,{value:a,whileDrag:{rotate:2,scale:1.02},className:"cursor-grab active:cursor-grabbing",children:e.jsxs(S.div,{layoutId:a.id,onClick:()=>d(a),className:"bg-[#1C1F26] border border-[#2D313A] rounded-md p-3.5 hover:border-[#5E6AD2]/50 transition-all shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("span",{className:"text-[10px] font-mono text-[#6B7280] tracking-wider",children:a.id}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(M,{className:"w-3 h-3 text-[#2D313A] opacity-0 group-hover:opacity-100 transition-opacity"})})]}),e.jsx("h4",{className:"text-[13px] font-medium text-[#F3F4F6] leading-tight mb-4",children:a.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:s(a.priority),children:a.priority==="High"?"高":a.priority==="Medium"?"中":"低"}),e.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-[#6B7280]",children:[e.jsx(j,{className:"w-3 h-3"}),e.jsx("span",{children:a.dueDate.split("-").slice(1).join("/")})]})]}),e.jsx(h,{src:i.find(n=>n.id===a.assigneeId)?.avatarUrl,fallback:i.find(n=>n.id===a.assigneeId)?.name||"??",size:"xs"})]})]})},a.id)),e.jsxs("button",{className:"w-full py-2 border border-dashed border-[#2D313A] rounded-md text-[#6B7280] hover:text-[#9CA3AF] hover:border-[#6B7280] transition-all text-xs flex items-center justify-center gap-2 group/btn",children:[e.jsx(u,{className:"w-3 h-3 group-hover/btn:scale-110 transition-transform"}),"添加任务"]})]})]},r.title)})}),e.jsx(O,{task:l&&t.find(r=>r.id===l.id)||null,isOpen:!!l,onClose:()=>d(null)})]})}export{L as default};
